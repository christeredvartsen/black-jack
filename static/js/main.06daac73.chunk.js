(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a(54)},48:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(14),s=a.n(c),l=a(5),u=a(18),o=a(7),i=a(15),d=a(16),m=a(19),p=a(17),h=a(20),f=a(6),y=a.n(f),E=a(2),g=a.n(E),w=g.a.shape({suit:g.a.oneOf(["HEARTS","SPADES","CLUBS","DIAMONDS"]).isRequired,value:g.a.oneOf(["2","3","4","5","6","7","8","9","10","J","Q","K","A"]).isRequired}),b=g.a.arrayOf(w),k=(g.a.shape({name:g.a.string.isRequired,score:g.a.number.isRequired,cards:b.isRequired}),function(e){var t=e.cards;return n.a.createElement("p",null,"There are ",t.length," cards left in the deck.")}),v="both win",O="both lose",S="player 1 wins",j="player 2 wins",C="player 1 to draw",q="player 2 to draw",R=function(e){return e.reduce(function(e,t){return e+function(e){var t,a=e.value;switch(a.toLowerCase()){case"j":case"q":case"k":t=10;break;case"a":t=11;break;default:t=parseInt(a,10)}return t}(t)},0)},A=function(e,t){return 21===e&&21===t?v:e>21&&t>21?O:t>21||21===e?S:e>21||e>=17&&t>e?j:e<17?C:q},N=function(e){var t=e.result,a=e.p1,r=e.p2;switch(t){case v:return n.a.createElement("h2",null,"Both won!");case O:return n.a.createElement("h2",null,"Both lose!");case S:return n.a.createElement("h2",null,a," won!");case j:return n.a.createElement("h2",null,r," won!");default:return null}},D=(a(48),function(e){return e.value+e.suit.charAt(0)}),T=function(e){var t=e.drawCard,a=e.name,r=e.score,c=e.cards,s=e.draw;return n.a.createElement("fieldset",{className:"player"},n.a.createElement("legend",null,a),n.a.createElement("dl",null,n.a.createElement("dt",null,"Score"),n.a.createElement("dd",{className:"playerScore"},r),n.a.createElement("dt",null,"Cards"),n.a.createElement("dd",{className:"playerCards"},c.length>0?n.a.createElement("ol",null,c.map(function(e){return n.a.createElement("li",{key:D(e)},D(e))})):n.a.createElement("p",null,"The player has no cards."))),s?n.a.createElement("button",{onClick:t},"Draw"):null)},B=function(e){var t=e.reset;return n.a.createElement("button",{onClick:t},"Restart game")},M=(a(50),function(e){var t=e.drawCard,a=e.gameState,r=e.reset,c=e.deck,s=e.player1,l=e.player2;return n.a.createElement("div",null,n.a.createElement(k,{cards:c}),n.a.createElement(N,{result:a,p1:s.name,p2:l.name}),n.a.createElement("div",{className:"players"},n.a.createElement(T,Object.assign({},s,{drawCard:function(){return t("player1")},draw:a===C})),n.a.createElement(T,Object.assign({},l,{drawCard:function(){return t("player2")},draw:a===q}))),n.a.createElement(B,{reset:r}))}),G=(a(52),function(e){var t=e.message,a=e.reset;return n.a.createElement(n.a.Fragment,null,n.a.createElement("p",null,"An error occurred: ",n.a.createElement("span",{className:"errorMessage"},t),"."),n.a.createElement(B,{reset:a}))}),I="https://nav-deckofcards.herokuapp.com/shuffle",J={error:void 0,deck:[],player1:{name:"Christer",score:0,cards:[]},player2:{name:"Magnus",score:0,cards:[]},gameState:C},L=function(e){function t(){var e,a;Object(i.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(n)))).requestSource=y.a.CancelToken.source(),a.state=Object.assign({},J),a.drawCard=function(e){var t,r=Object(o.a)(a.state.deck),n=r[0],c=r.slice(1),s=[].concat(Object(u.a)(a.state[e].cards),[n]),i=R(s),d=Object.assign({},a.state[e],{cards:s,score:i}),m="player1"===e?"player2":"player1",p="player1"===e?A(d.score,a.state[m].score):A(a.state[m].score,d.score);a.setState((t={deck:c},Object(l.a)(t,e,d),Object(l.a)(t,"gameState",p),t))},a.reset=function(){a.setState(Object.assign({},J)),a.startGame()},a.startGame=function(){y.a.get(I,{timeout:5e3,cancelToken:a.requestSource.token}).then(function(e){var t=e.data,r=Object(o.a)(t),n=r[0],c=r[1],s=r[2],l=r[3],u=r.slice(4),i=[n,c],d=R(i),m=[s,l],p=R(m),h=Object.assign({},a.state.player1,{cards:i,score:d}),f=Object.assign({},a.state.player2,{cards:m,score:p}),y=A(d,p);a.setState({deck:u,player1:h,player2:f,gameState:y})}).catch(function(e){a.setState({error:e.message})})},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.startGame()}},{key:"componentWillUnmount",value:function(){this.requestSource&&this.requestSource.cancel("Request cancelled")}},{key:"render",value:function(){return"undefined"!==typeof this.state.error?n.a.createElement(G,{message:this.state.error,reset:this.reset}):this.state.deck.length>0?n.a.createElement(M,{gameState:this.state.gameState,reset:this.reset,deck:this.state.deck,player1:this.state.player1,player2:this.state.player2,drawCard:this.drawCard}):n.a.createElement("p",null,"Loading deck...")}}]),t}(r.Component);s.a.render(n.a.createElement(L,null),document.getElementById("root"))}},[[21,2,1]]]);
//# sourceMappingURL=main.06daac73.chunk.js.map